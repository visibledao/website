---
layout: default
title: Members
---

<script src="{{ site.baseurl }}/assets/js/qrcode.min.js"></script>

<div class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80" aria-hidden="true">
  <div
    class="relative left-[calc(40%-11rem)] aspect-[1155/678] w-[46.125rem] -translate-x-1/2 rotate-[90deg] bg-gradient-to-tr from-[#FFFFFF] to-[#FFFFFF] sm:left-[calc(50%-20rem)] sm:w-[72.1875rem]"
    style="clip-path: polygon(74.1% 44.1%, 27.5% 50.0% 76.7%, 37.9% 100% 76.8%, 76.1% 97.7%)">
  </div>
</div>

<main class="isolate">
  <div class="mb-12">
    <main class="isolate">
      <div class="mx-auto mt-12 max-w-7xl px-6 sm:mt-36 lg:px-8">
        <div class="mx-auto max-w-2xl lg:text-center">
          {% include block-logotype.html %}
        </div>
      </div>
    </main>
  </div>
  <div class="mx-auto mt-24 max-w-7xl px-6 lg:px-8 pt-24 sm:pt-0">
    <div class="mx-auto max-w-2xl lg:mx-0">
      <h2 class="text-pretty text-6xl font-semibold tracking-tight text-gray-900 sm:text-5xl">
        Visibility
      </h2>
      <p class="mt-6 text-lg/8 text-slate-800">
        We believe in the potential of bitcoin, are experimenting toward transparency, and building in public.
        Welcome to Visible DAO.
      </p>
    </div>
    <!-- Member Grid -->
    <ul role="list"
      class="mx-auto mt-20 grid max-w-2xl grid-cols-2 gap-x-8 gap-y-16 text-center sm:grid-cols-3 md:grid-cols-4 lg:mx-0 lg:max-w-none lg:grid-cols-5 xl:grid-cols-6">
      {% for member in site.data.members %}
      {% if member.display_name != "" %}
      <li>
        <a
          href="{{ member.url }}"
          target="_blank"
        >
          {% if member.image_path != "" %}
          <img class="mx-auto size-24 rounded-full object-cover" src="{{ site.baseurl }}/assets/images/members/{{ member.image_path }}"
            alt="{{ member.display_name }} avatar">
          {% else %}
          <div class="bg-gradient-to-r from-[#FFA62B] via-[#FFCD4B] to-[#FFF275] mx-auto size-24 rounded-full">
          </div>
          {% endif %}
          <h3 class="mt-6 text-base/7 font-semibold tracking-tight text-slate-800">
            {{ member.display_name }}
          </h3>
        </a>
      </li>
      {% endif %}
      {% endfor %}
      <!-- Placeholder for next member -->
      <li>
        <div
          id="next-member"
          class="mx-auto size-24 rounded-full bg-gradient-to-br from-orange-200 via-yellow-200 to-amber-300 flex items-center justify-center text-slate-800 shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer border-2 border-white"
          onclick="document.getElementById('join-modal').classList.remove('hidden'); document.body.style.overflow = 'hidden';">
        </div>
        <h3 class="mt-6 text-base/7 font-semibold tracking-tight text-slate-600">
          Visible You
        </h3>
        <button id="join-today-placeholder" class="mt-2 text-xs text-slate-500 hover:text-slate-800 transition-colors duration-200">
          Join â†’
        </button>
      </li>
    </ul>

    <!-- Network Visualization -->
    <div class="mt-16">
      <div class="bg-white rounded-2xl shadow-lg border border-slate-100 p-6">
        <div id="network-graph" class="w-full" style="height: 500px;"></div>
        <div class="mt-4 flex items-center justify-center space-x-6 text-xs text-slate-500">
          <div class="flex items-center">
            <div class="w-3 h-3 rounded-full bg-slate-800 mr-2"></div>
            <span>Members</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 rounded-full bg-orange-500 mr-2"></div>
            <span>Projects</span>
          </div>
        </div>
      </div>
    </div>
  </div>

{% include join-modal.html %}

<script src="{{ '/assets/js/d3.min.js' | relative_url }}"></script>
<script>
  // Data preparation
  const members = [
    {% for member in site.data.members %}
      {% if member.display_name != "" %}
        {
          id: "{{ member.display_name }}",
          name: "{{ member.display_name }}",
          type: "member",
          url: "{{ member.url }}",
          image: "{{ member.image_path }}"
        },
      {% endif %}
    {% endfor %}
  ];


  const projects = [
    {% for project in site.data.projects %}
      {
        id: "{{ project.id }}",
        name: "{{ project.name }}",
        type: "project",
        url: "{{ project.url }}",
        color: "{{ project.color }}",
        status: "{{ project.status }}"
      },
    {% endfor %}
  ];

  const projectContributions = [
    {% for project in site.data.projects %}
      {% for contributor in project.contributors %}
        {
          source: "{{ contributor }}",
          target: "{{ project.id }}",
          type: "contributes"
        },
      {% endfor %}
    {% endfor %}
  ];

  // Combine nodes
  const nodes = [...members, ...projects];
  const links = projectContributions;

  // D3 Force Simulation
  const container = d3.select("#network-graph");
  const width = container.node().getBoundingClientRect().width;
  const height = 500;

  const svg = container
    .append("svg")
    .attr("width", width)
    .attr("height", height)
    .attr("viewBox", [0, 0, width, height])
    .style("max-width", "100%")
    .style("height", "auto");

  // Create shared defs for avatar patterns
  const defs = svg.append("defs");

  // Create patterns for members with images
  members.forEach(d => {
    if (d.image && d.image !== "") {
      const patternId = `avatar-${d.id.replace(/\s+/g, '-')}`;
      const baseUrl = "{{ site.baseurl }}";
      const imageUrl = baseUrl + "/assets/images/members/" + d.image;

      const pattern = defs.append("pattern")
        .attr("id", patternId)
        .attr("patternUnits", "objectBoundingBox")
        .attr("width", 1)
        .attr("height", 1);

      pattern.append("image")
        .attr("href", imageUrl)
        .attr("width", 60)
        .attr("height", 60)
        .attr("x", 0)
        .attr("y", 0)
        .attr("preserveAspectRatio", "xMidYMid slice");
    }
  });

  // Enhanced force simulation with project centering
  const simulation = d3.forceSimulation(nodes)
    .force("link", d3.forceLink(links).id(d => d.id).distance(120))
    .force("charge", d3.forceManyBody().strength(-400))
    .force("center", d3.forceCenter(width / 2, height / 2))
    .force("collision", d3.forceCollide().radius(35))
    .force("radial", d3.forceRadial(
      d => d.type === "project" ? 50 : 150,
      width / 2,
      height / 2
    ).strength(0.3));

  // Create links
  const link = svg.append("g")
    .selectAll("line")
    .data(links)
    .enter()
    .append("line")
    .attr("stroke", "#cbd5e1")
    .attr("stroke-width", 2)
    .attr("stroke-opacity", 0.6);

  // Create nodes
  const node = svg.append("g")
    .selectAll("g")
    .data(nodes)
    .enter()
    .append("g")
    .call(d3.drag()
      .on("start", dragstarted)
      .on("drag", dragged)
      .on("end", dragended))
    .style("cursor", "pointer");

  // Add circles and images for nodes
  // Add main circles with white background behind avatars
  node.append("circle")
    .attr("class", "main-circle")
    .attr("r", d => d.type === "member" ? 30 : 25)
    .attr("fill", d => {
      if (d.type === "member" && d.image && d.image !== "") {
        const patternId = `avatar-${d.id.replace(/\s+/g, '-')}`;
        return `url(#${patternId})`;
      } else if (d.type === "member") {
        return "#1e293b";
      }
      return d.color || "#f97316";
    })
    .attr("stroke", "white")
    .attr("stroke-width", 4);

  // Add text labels
  node.append("text")
    .text(d => d.name.length > 12 ? d.name.substring(0, 12) + "..." : d.name)
    .attr("dy", -35)
    .attr("text-anchor", "middle")
    .style("font-size", "12px")
    .style("font-weight", "600")
    .style("fill", "#374151")
    .style("text-shadow", "1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff");

  // Add hover effects
  node.on("mouseover", function(event, d) {
    d3.select(this).select("circle")
      .transition()
      .duration(200)
      .attr("r", d => d.type === "member" ? 35 : 30)
      .attr("stroke-width", 6);

    // Highlight connected links
    link.style("stroke", l =>
      l.source.id === d.id || l.target.id === d.id ? "#f97316" : "#cbd5e1"
    ).style("stroke-width", l =>
      l.source.id === d.id || l.target.id === d.id ? 4 : 2
    );
  })
  .on("mouseout", function(event, d) {
    d3.select(this).select("circle")
      .transition()
      .duration(200)
      .attr("r", d => d.type === "member" ? 30 : 25)
      .attr("stroke-width", 4);

    // Reset link colors
    link.style("stroke", "#cbd5e1")
      .style("stroke-width", 2);
  });

  // Add click handler - gray projects open URLs, others open join modal
  node.on("click", function(event, d) {
    if (d.type === "project" && d.color === "#6b7280" && d.url) {
      // Open gray project nodes in new tab
      window.open(d.url, '_blank');
    } else {
      // Open join modal for other nodes
      const modal = document.getElementById("join-modal");
      if (modal) {
        modal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      }
    }
  });

  // Update positions on each simulation tick
  simulation.on("tick", () => {
    link
      .attr("x1", d => d.source.x)
      .attr("y1", d => d.source.y)
      .attr("x2", d => d.target.x)
      .attr("y2", d => d.target.y);

    node
      .attr("transform", d => `translate(${d.x},${d.y})`);
  });

  // Drag functions
  function dragstarted(event, d) {
    if (!event.active) simulation.alphaTarget(0.3).restart();
    d.fx = d.x;
    d.fy = d.y;
  }

  function dragged(event, d) {
    d.fx = event.x;
    d.fy = event.y;
  }

  function dragended(event, d) {
    if (!event.active) simulation.alphaTarget(0);
    d.fx = null;
    d.fy = null;
  }

  // Handle window resize
  window.addEventListener('resize', () => {
    const newWidth = container.node().getBoundingClientRect().width;
    svg.attr("width", newWidth).attr("viewBox", [0, 0, newWidth, height]);
    simulation.force("center", d3.forceCenter(newWidth / 2, height / 2)).alpha(0.3).restart();
  });
</script>

</main>
